<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Вход</title>
    <link rel="icon" type="image/png" href="../resources/icon.png" />
    <link rel="stylesheet" href="../css/index.css" />
    <script src="../scripts/script.js" type="module"></script>
  </head>

  <body>
    <div>
      <h1 id="game-title">
        <span class="letter" style="color: #4285f4">T</span>
        <span class="letter" style="color: #db4437">e</span>
        <span class="letter" style="color: #f4b400">t</span>
        <span class="letter" style="color: #4285f4">r</span>
        <span class="letter" style="color: #63e83a">i</span>
        <span class="letter" style="color: #db4437">s</span>
      </h1>
      <form id="username-form" onsubmit="saveUsername(event)">
        <input
          type="text"
          id="nickname"
          placeholder="Имя пользователя"
          maxlength="20"
          required
        />
        <button type="submit">Готово!</button>
      </form>
    </div>

    <script>
      function saveUsername(event) {
        event.preventDefault();
        const username = document.getElementById("nickname").value.trim();
        if (username && username.length <= 20) {
          localStorage.setItem("tetris.username", username);
          window.location.href = "tetris.html";
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        const nicknameInput = document.getElementById("nickname");
        const lastUsername = localStorage.getItem("tetris.username");
        if (lastUsername) {
          nicknameInput.value = lastUsername;
        }
      });
    </script>
  </body>
</html>
